c1df <- filter(df, concept == c1)
m1 <- min(tail(sort(c1df$weight), nTopColor))
# print(paste("i: ", i))
# j = 5
for (j in (i+1):(length(concepts))){
c2 <- concepts[j]
c2df <- filter(df, concept == c2)
m2 <- min(tail(sort(c2df$weight), nTopColor)) # median weight, or mean, or any arbitrary threshold
# colors highly rated in c1df
c1high <- filter(c1df, weight >= m1, weight >= 0.35)$color
# from c1up, subset that are lowly associated for c2 (i.e. in c2df)
c2low <- filter(c2df, color %in% c1high, round(weight, digits = 2) <= 0.25)$color
c1high <- intersect(c1high, c2low)
c2high <- filter(c2df, weight >= m2, weight >= 0.35)$color
c1low <- filter(c1df, color %in% c2high, round(weight, digits = 2) <= 0.25)$color
c2high <- intersect(c2high, c1low)
c1df_ <- filter(c1df, color %in% union(c1high, c2high))
c1df_$type <- "con1"
c2df_ <- filter(c2df, color %in% union(c1high, c2high))
c2df_$type <- "con2"
cPair <- rbind(c1df_, c2df_)
cPair$pairId = k
tmp <- rbind(tmp, cPair)
k <- k+1
}
}
return(tmp)
}
rm(genCandidate())
rm(genCandidate)
## function to generate df for candidate colors and concepts
genCandidates <- function(df, concepts, nTopColor){
tmp <- data.frame()
k = 1
for (i in 1:(length(concepts)-1)){
c1 <- concepts[i]
c1df <- filter(df, concept == c1)
m1 <- min(tail(sort(c1df$weight), nTopColor))
# print(paste("i: ", i))
# j = 5
for (j in (i+1):(length(concepts))){
c2 <- concepts[j]
c2df <- filter(df, concept == c2)
m2 <- min(tail(sort(c2df$weight), nTopColor)) # median weight, or mean, or any arbitrary threshold
# colors highly rated in c1df
c1high <- filter(c1df, weight >= m1, weight >= 0.35)$color
# from c1up, subset that are lowly associated for c2 (i.e. in c2df)
c2low <- filter(c2df, color %in% c1high, round(weight, digits = 2) <= 0.25)$color
c1high <- intersect(c1high, c2low)
c2high <- filter(c2df, weight >= m2, weight >= 0.35)$color
c1low <- filter(c1df, color %in% c2high, round(weight, digits = 2) <= 0.25)$color
c2high <- intersect(c2high, c1low)
c1df_ <- filter(c1df, color %in% union(c1high, c2high))
c1df_$type <- "con1"
c2df_ <- filter(c2df, color %in% union(c1high, c2high))
c2df_$type <- "con2"
cPair <- rbind(c1df_, c2df_)
cPair$pairId = k
tmp <- rbind(tmp, cPair)
k <- k+1
}
}
return(tmp)
}
genCandidates(mg, concepts, nTopColor)
cand_mg <- genCandidates(mg, concepts, nTopColor)
cand_us <- genCandidates(us, concepts, nTopColor)
View(us)
View(mg)
View(mg)
function
plotCandidates <- function(tmp){
tmp_ <- tmp %>% group_by(pairId) %>%
filter(!max(weight) < 0.5) %>%
mutate(nColors = n()/2, .groups = 'drop') %>%
filter(nColors >= 4)  # nColors == nombre de couleur unique dans le pair candidat
conceptsOrd <- c('banana', 'mango', 'peach', 'angry', 'happy', 'sad', 'peace', 'justice', 'love', 'drought')
tmp_$con = factor(tmp_$concept, levels=conceptsOrd) # to order the facet strips
tmp_ <- tmp_ %>% drop_na()
plotList <- list(); l = 1
for (p in unique(tmp_$pairId)){
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
plot.background = element_rect(color = "azure4", linewidth = 0.5))
plotList[[l]] = plot
l <- l+1
}
pCan <- grid.arrange(grobs = plotList, ncol = 7, top = ("Candidate pairs of concepts and colors for experiment 2")); pCan
}
## function to plot the candidate colors and concepts
plotCandidates(cand_mg)
getListPlotCandidates <- function(tmp, conceptsOrd){
tmp_ <- tmp %>% group_by(pairId) %>%
filter(!max(weight) < 0.5) %>%
mutate(nColors = n()/2, .groups = 'drop') %>%
filter(nColors >= 4)  # nColors == nombre de couleur unique dans le pair candidat
tmp_$con = factor(tmp_$concept, levels=conceptsOrd) # to order the facet strips
tmp_ <- tmp_ %>% drop_na()
plotList <- list(); l = 1
for (p in unique(tmp_$pairId)){
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
plot.background = element_rect(color = "azure4", linewidth = 0.5))
plotList[[l]] = plot
l <- l+1
}
return(plotList)
}
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
pCan <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("Candidate pairs of concepts and colors for experiment 2")); pCan
plotList_us <- getListPlotCandidates(cand_us, conceptsOrd)
p_us <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("USA - Candidate pairs of concepts and colors for experiment 2")); p_us
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 5, top = ("MDG - Candidate pairs of concepts and colors for experiment 2")); p_mg
ggsave(file="./fig/exp2-candidates-mg.png", plot = p_mg, width=18, height=28)
plotList_us <- getListPlotCandidates(cand_us, conceptsOrd)
p_us <- grid.arrange(grobs = plotList_us, ncol = 7, top = ("USA - Candidate pairs of concepts and colors for experiment 2")); p_us
p_us <- grid.arrange(grobs = plotList_us, ncol = 5, top = ("USA - Candidate pairs of concepts and colors for experiment 2")); p_us
ggsave(file="./fig/exp2-candidates-us.png", plot = p_us, width=18, height=28)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("MDG - Candidate pairs of concepts and colors for experiment 2")); p_mg
p_us <- grid.arrange(grobs = plotList_us, ncol = 7, top = ("USA - Candidate pairs of concepts and colors for experiment 2")); p_us
ggsave(file="./fig/exp2-candidates-mg.png", plot = p_mg, width=20, height=18)
ggsave(file="./fig/exp2-candidates-us.png", plot = p_us, width=20, height=18)
ggsave(file="./fig/exp2-candidates-mg.png", plot = p_mg, width=20, height=15)
getListPlotCandidates <- function(tmp, conceptsOrd){
tmp_ <- tmp %>% group_by(pairId) %>%
filter(!max(weight) < 0.5) %>%
mutate(nColors = n()/2, .groups = 'drop') %>%
filter(nColors >= 4)  # nColors == nombre de couleur unique dans le pair candidat
tmp_$con = factor(tmp_$concept, levels=conceptsOrd) # to order the facet strips
tmp_ <- tmp_ %>% drop_na()
plotList <- list(); l = 1
for (p in unique(tmp_$pairId)){
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
# plot.background = element_rect(color = "azure4", linewidth = 0.5),
panel.spacing.x = unit(1, 'lines'))
plotList[[l]] = plot
l <- l+1
}
return(plotList)
}
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("MDG - Candidate pairs of concepts and colors for experiment 2")); p_mg
getListPlotCandidates <- function(tmp, conceptsOrd){
tmp_ <- tmp %>% group_by(pairId) %>%
filter(!max(weight) < 0.5) %>%
mutate(nColors = n()/2, .groups = 'drop') %>%
filter(nColors >= 4)  # nColors == nombre de couleur unique dans le pair candidat
tmp_$con = factor(tmp_$concept, levels=conceptsOrd) # to order the facet strips
tmp_ <- tmp_ %>% drop_na()
plotList <- list(); l = 1
for (p in unique(tmp_$pairId)){
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
# plot.background = element_rect(color = "azure4", linewidth = 0.5),
panel.spacing.x = unit(0.5, 'lines'))
plotList[[l]] = plot
l <- l+1
}
return(plotList)
}
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("MDG - Candidate pairs of concepts and colors for experiment 2")); p_mg
getListPlotCandidates <- function(tmp, conceptsOrd){
tmp_ <- tmp %>% group_by(pairId) %>%
filter(!max(weight) < 0.5) %>%
mutate(nColors = n()/2, .groups = 'drop') %>%
filter(nColors >= 4)  # nColors == nombre de couleur unique dans le pair candidat
tmp_$con = factor(tmp_$concept, levels=conceptsOrd) # to order the facet strips
tmp_ <- tmp_ %>% drop_na()
plotList <- list(); l = 1
for (p in unique(tmp_$pairId)){
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
plot.background = element_rect(color = "azure4", linewidth = 0.5),
panel.spacing.x = unit(0.5, 'lines'))
plotList[[l]] = plot
l <- l+1
}
return(plotList)
}
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("MDG - Candidate pairs of concepts and colors for experiment 2")); p_mg
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
plot.background = element_rect(color = "azure4", linewidth = 0.5),
panel.spacing.x = unit(0.25, 'cm'))
getListPlotCandidates <- function(tmp, conceptsOrd){
tmp_ <- tmp %>% group_by(pairId) %>%
filter(!max(weight) < 0.5) %>%
mutate(nColors = n()/2, .groups = 'drop') %>%
filter(nColors >= 4)  # nColors == nombre de couleur unique dans le pair candidat
tmp_$con = factor(tmp_$concept, levels=conceptsOrd) # to order the facet strips
tmp_ <- tmp_ %>% drop_na()
plotList <- list(); l = 1
for (p in unique(tmp_$pairId)){
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
plot.background = element_rect(color = "azure4", linewidth = 0.5),
panel.spacing.x = unit(0.25, 'cm'))
plotList[[l]] = plot
l <- l+1
}
return(plotList)
}
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("MDG - Candidate pairs of concepts and colors for experiment 2")); p_mg
getListPlotCandidates <- function(tmp, conceptsOrd){
tmp_ <- tmp %>% group_by(pairId) %>%
filter(!max(weight) < 0.5) %>%
mutate(nColors = n()/2, .groups = 'drop') %>%
filter(nColors >= 4)  # nColors == nombre de couleur unique dans le pair candidat
tmp_$con = factor(tmp_$concept, levels=conceptsOrd) # to order the facet strips
tmp_ <- tmp_ %>% drop_na()
plotList <- list(); l = 1
for (p in unique(tmp_$pairId)){
# p = unique(tmp_$pairId)[1]
plot <- filter(tmp_, pairId == p) %>%
ggplot(aes(reorder_within(color, weight, con), weight, fill = hex, color = 'black')) +
geom_bar(stat = 'identity',size = 0.15, width = 0.80) +
# geom_errorbar( aes(x=reorder_within(color, weight, concept), ymin=weight-se, ymax=weight+se), width=0.4, colour="black", alpha=0.6, size=0.25)+
scale_fill_identity() + scale_color_identity() + scale_x_reordered() +
scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +
facet_wrap(~ con, scales = "free_x", ncol = 1) +
labs(x = "", title = "") + theme_light() +
theme(legend.position = "none",
strip.text = element_text(size = 12, color = "black"), strip.background = element_blank(),
plot.background = element_rect(color = "azure4", linewidth = 0.5),
panel.spacing = unit(0.25, 'cm'))
plotList[[l]] = plot
l <- l+1
}
return(plotList)
}
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = ("MDG - Candidate pairs of concepts and colors for experiment 2")); p_mg
plotList_us <- getListPlotCandidates(cand_us, conceptsOrd)
p_us <- grid.arrange(grobs = plotList_us, ncol = 7, top = ("USA - Candidate pairs of concepts and colors for experiment 2")); p_us
ggsave(file="./fig/exp2-candidates-mg.png", plot = p_mg, width=20, height=15)
ggsave(file="./fig/exp2-candidates-us.png", plot = p_us, width=20, height=18)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 15, font = 8))); p_mg
library(grid)
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 15, font = 8))); p_mg
source(file = './utils/exp2-utils.R')
source(file = './utils/exp1-utils.R')  # loads all necessary packages //NOTE: some packages
source(file = './utils/exp2-utils.R')
# getting the data from before p2
## run line 16:21 then 29:36 in exp1-p1 then
df1 <- rbind(usdf, mgdf) %>% rename(country = expCountry) %>%
select(concept, color, ans, country, rating)
# run 'data-prep2' chunk in this file
usa_dem <- read_csv("data/exp1/csv/p2-usa-dem.csv") %>%
filter(expCountry == "usa2") %>%
filter(progressBlock == 16, progressColor == 37)
usa_dem$country <- "usa"
usa <- read_csv("data/exp1/csv/p2-usa.csv") %>% filter(ID %in% unique(usa_dem$sessionID))
usa$country <- "usa"
mdg_dem <- read_csv("data/exp1/csv/p2-mdg-dem.csv") %>% filter(expCountry == "mdg2") %>%
filter(progressBlock == 16, progressColor == 37)
mdg_dem$country <- "mdg"
mdg <- read_csv("data/exp1/csv/p2-mdg.csv") %>% filter(ID %in% unique(mdg_dem$sessionID)) %>%
rename(conceptFr = concept)
mdg$conceptFr <- tolower(mdg$conceptFr)
mdg$concept <- conceptListEn2[match(mdg$conceptFr, conceptListFr2)] # replacing the concepts values of conceptListFr2 in mdg$conceptFr with their respective matches in conceptListEn2
mdg$conceptFr <- NULL;
mdg$country <- "mdg"
df <- rbind(mdg, usa)
df$rating <- round(df$ans/100, digits = 2)
df2 <- df %>% select(concept, color, ans, country, rating)
dfAll <- rbind(df1, df2)
dfAll <- dfAll %>% group_by(country, concept, color) %>% summarize(
weight = round(mean(rating), digits = 2),
se = round(sd(rating)/sqrt(length(rating)), digits = 2), .groups = 'drop') # standard error
dfAll <- full_join(dfAll, bcp37hex, by = "color")
dfAll_ <- dfAll %>% filter(concept %in% intersect(unique(df1$concept), unique(df2$concept)))
concepts <- unique(dfAll_$concept)
mg <- filter(dfAll_, country == "mdg")
us <- filter(dfAll_, country == "usa")
nTopColor = 4
## Getting data for candidate colors and concepts
cand_mg <- genCandidates(mg, concepts, nTopColor)
cand_us <- genCandidates(us, concepts, nTopColor)
## Plotting the pairs of candidate colors and concepts
conceptsOrd <- c('banana', 'mango', 'peach', 'angry', 'happy', 'sad', 'peace', 'justice', 'love', 'drought')
plotList_mg <- getListPlotCandidates(cand_mg, conceptsOrd)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 15, font = 8))); p_mg
plotList_us <- getListPlotCandidates(cand_us, conceptsOrd)
p_us <- grid.arrange(grobs = plotList_us, ncol = 7, top = ("USA - Candidate pairs of concepts and colors for experiment 2")); p_us
ggsave(file="./fig/exp2-candidates-us.png", plot = p_us, width=20, height=18)
p_mg
p_mg
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 15, font = 8))); p_mg
plotList_us <- getListPlotCandidates(cand_us, conceptsOrd)
p_us <- grid.arrange(grobs = plotList_us, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 15, font = 8))); p_us
ggsave(file="./fig/exp2-candidates-mg.png", plot = p_mg, width=20, height=15)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 25, font = 8))); p_mg
ggsave(file="./fig/exp2-candidates-mg.png", plot = p_mg, width=20, height=15)
p_mg <- grid.arrange(grobs = plotList_mg, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 20, font = 8))); p_mg
p_us <- grid.arrange(grobs = plotList_us, ncol = 7, top = textGrob("MDG - Candidate pairs of concepts and colors for experiment 2", gp = gpar(fontsize = 20, font = 8))); p_us
ggsave(file="./fig/exp2-candidates-mg.png", plot = p_mg, width=20, height=15)
ggsave(file="./fig/exp2-candidates-us.png", plot = p_us, width=20, height=18)
################################################################## MG demography data #####
mg_dem <- read.csv("data/exp1/csv/mdg-dem.csv", encoding = "UTF-8")
gc()
gc()
################################################################## MG demography data #####
mg_dem <- read.csv("data/exp1/csv/mdg-dem.csv", encoding = "UTF-8")
View(mg_dem)
View(mg_dem)
mg_dem <- mg_dem %>%
mutate(profession = replace(profession,
profession %in% c("ETUDIANT", "ETUDIANTE", "ETUDIENT", "etudiant", "Etudiente", "Student", "Etudiant",
"étudiant", "etudiante", "etudiante ", "Student ", "etudient", "Etudiante", "étudiante", "Etudient"), "student")) %>%
mutate(gender = replace(gender, gender %in% c("homme", "Homme", "masculin", "Male", "FEMININ", "MASCULIN", "HOMME", "MALE", "Masculin"), "male")) %>%
mutate(gender = replace(gender, gender %in% c("femme", "FEMME", "femelle", "Femme", "feminin", "Feminin", "femmme"), "female")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd1"), "mdg1")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd2"), "mdg2")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd3"), "mdg3"))
source(file = './utils/exp1-utils.R')  # loads all necessary packages //NOTE: some packages
mg_dem <- mg_dem %>%
mutate(profession = replace(profession,
profession %in% c("ETUDIANT", "ETUDIANTE", "ETUDIENT", "etudiant", "Etudiente", "Student", "Etudiant",
"étudiant", "etudiante", "etudiante ", "Student ", "etudient", "Etudiante", "étudiante", "Etudient"), "student")) %>%
mutate(gender = replace(gender, gender %in% c("homme", "Homme", "masculin", "Male", "FEMININ", "MASCULIN", "HOMME", "MALE", "Masculin"), "male")) %>%
mutate(gender = replace(gender, gender %in% c("femme", "FEMME", "femelle", "Femme", "feminin", "Feminin", "femmme"), "female")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd1"), "mdg1")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd2"), "mdg2")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd3"), "mdg3"))
unique(mg_dem$profession)
unique(mg_dem$gender)
unique(mg_dem$expCountry)
write_csv(filter(mg_dem, expCountry == "mdg1"), "data/exp1/csv/clean/mg-dem-p1.csv")
write_csv(filter(mg_dem, expCountry == "mdg2"), "data/exp1/csv/clean/mg-dem-p2.csv")
write_csv(filter(mg_dem, expCountry == "mdg3"), "data/exp1/csv/clean/mg-dem-p3.csv")
#### MG response data #####
mgdf <- read.csv("data/exp1/csv/mdg.csv", encoding = "UTF-8")
mgdf <- mgdf %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd1"), "mdg1")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd2"), "mdg2")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd3"), "mdg3")) %>%
mutate(concept = tolower(concept)) %>%
rename(conceptFr = concept)
write_csv(filter(mgdf, expCountry == "mdg1"), "data/exp1/csv/clean/mg-p1.csv")
mgdf <- mgdf %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd1"), "mdg1")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd2"), "mdg2")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd3"), "mdg3")) %>%
mutate(concept = tolower(concept)) %>%
rename(conceptFr = concept)
write_csv(filter(mgdf, expCountry == "mdg2"), "data/exp1/csv/clean/mg-p2.csv")
write_csv(filter(mgdf, expCountry == "mdg3"), "data/exp1/csv/clean/mg-p3.csv")
################################################################## US demography data #####
us_dem <- read_csv("data/exp1/csv/usa-dem.csv")
unique(us_dem$profession)
unique(us_dem$gender)
unique(us_dem$expCountry)
us_dem <- us_dem %>%
mutate(profession = replace(profession, profession %in% c("ETUDIANT"), "student")) %>%
mutate(profession = replace(profession, profession %in% c("None", "n/a"), "Unemployed")) %>%
mutate(gender = replace(gender, gender %in% c("HOMME", "Male"), "male")) %>%
mutate(gender = replace(gender, gender %in% c("Female", "F", "Woman"), "female"))
unique(us_dem$gender)
unique(us_dem$profession)
write_csv(filter(us_dem, expCountry == "usa1"), "data/exp1/csv/clean/us-dem-p1.csv")
write_csv(filter(us_dem, expCountry == "usa2"), "data/exp1/csv/clean/us-dem-p2.csv")
write_csv(filter(us_dem, expCountry == "usa3"), "data/exp1/csv/clean/us-dem-p3.csv")
#### US response data #####
usdf <- read_csv("data/exp1/csv/usa.csv")
write_csv(filter(usdf, expCountry == "usa1"), "data/exp1/csv/clean/us-p1.csv")
write_csv(filter(usdf, expCountry == "usa2"), "data/exp1/csv/clean/us-p2.csv")
write_csv(filter(usdf, expCountry == "usa3"), "data/exp1/csv/clean/us-p3.csv")
filter(usdf, expCountry == "usa3")
unique(filter(usdf, expCountry == "usa3")$ID)
unique(filter(usdf, expCountry == "usa2")$ID)
unique(filter(usdf, expCountry == "usa1")$ID)
filter(usdf, expCountry == "usa1")
filter(usdf, expCountry == "us0")
filter(usdf, expCountry == NA)
filter(usdf, expCountry == "NA")
filter(us_dem, expCountry == "NA")
filter(us_dem, expCountry == NA)
unique(us_dem$expCountry)
View(us_dem)
################################################################## MG demography data #####
mg_dem <- read.csv("data/exp1/csv/mdg-dem.csv", encoding = "UTF-8")
mg_dem <- mg_dem %>%
mutate(profession = replace(profession,
profession %in% c("ETUDIANT", "ETUDIANTE", "ETUDIENT", "etudiant", "Etudiente", "Student", "Etudiant",
"étudiant", "etudiante", "etudiante ", "Student ", "etudient", "Etudiante", "étudiante", "Etudient"), "student")) %>%
mutate(gender = replace(gender, gender %in% c("homme", "Homme", "masculin", "Male", "FEMININ", "MASCULIN", "HOMME", "MALE", "Masculin"), "male")) %>%
mutate(gender = replace(gender, gender %in% c("femme", "FEMME", "femelle", "Femme", "feminin", "Feminin", "femmme"), "female")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd1"), "mdg1")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd2"), "mdg2")) %>%
mutate(expCountry = replace(expCountry, expCountry %in% c("mgd3"), "mdg3"))
unique(filter(mg_dem, expCountry == "mdg3"))
View(as.data.frame(unique(filter(mg_dem, expCountry == "mdg3"))))
unique(filter(mg_dem, expCountry == "mdg3"))$ID
unique(filter(mg_dem, expCountry == "mdg3"))$sessionID
mg_dem <- read_csv("data/exp1/csv/clean/mg-dem-p3.csv") %>%
filter(expCountry == "mdg3", progressBlock == 14, progressColor == 37)
mgdf <- read_csv("data/exp1/csv/clean/mg.csv") %>%
filter(expCountry == "mdg3", ID %in% unique(mg_dem$sessionID))
mgdf <- read_csv("data/exp1/csv/clean/mg-p3.csv") %>%
filter(expCountry == "mdg3", ID %in% unique(mg_dem$sessionID))
37*14
37*14*50
View(mg_dem)
View(us_dem)
View(filter(us_dem, expCountry == "usa3"))
View(filter(us_dem, expCountry == "usa3", progressBlock > 10))
View(filter(us_dem, expCountry == "usa3", progressBlock > 9))
View(filter(us_dem, expCountry == "usa3", progressBlock >= 13))
View(filter(us_dem, expCountry == "usa3", progressBlock > 13))
View(filter(us_dem, expCountry == "usa3", progressBlock >= 13))
View(filter(us_dem, expCountry == "usa3", progressBlock >= 14))
knitr::opts_chunk$set(echo = TRUE)
source(file = './utils/exp1-utils.R')  # loads all necessary packages
source(file = './utils/stimuli.R')
mg_dem <- read_csv("data/exp1/csv/clean/mg-dem-p3.csv") %>% filter(progressBlock == 14, progressColor == 37)
mgdf <- read_csv("data/exp1/csv/clean/mg-p3.csv") %>% filter(ID %in% unique(mg_dem$sessionID))
conceptListEn3 = c('banana', 'mango', 'peach', 'death', 'justice', 'peace', 'safety',
'angry', 'happy', 'sad', 'sick', 'lightning', 'sandstorm', 'tree')
conceptListFr3 = c('banane', 'mangue', 'pêche', 'mort', 'justice', 'peace', 'sécurité',
'en colère', 'heureux', 'triste', 'malade', 'foudre', 'tempête de sable', 'arbre')
mgdf <- translateConcepts(mgdf, conceptListFr3, conceptListEn3)
mgdf$expCountry <- "mdg"
# us_dem <- read_csv("data/exp1/csv/clean/us-dem.csv") %>%
# filter(expCountry == "usa3", progressBlock == 14, progressColor == 37)
us_dem <- read_csv("data/exp1/csv/clean/us-dem-p3.csv") %>%
filter(expCountry == "usa3", progressBlock == 14, progressColor == 37)
unique(us_dem$prolificID)
us_dem <- read_csv("data/exp1/csv/clean/us-dem-p3.csv") #%>%
unique(us_dem$prolificID)
View(usa_dem)
View(us_dem)
unique(us_dem$expCountry)
(us_dem$expCountry)
filter(progressBlock == 14, progressColor == 37)
us_dem <- read_csv("data/exp1/csv/clean/us-dem-p3.csv") #%>%
us_dem
us_dem <- read_csv("data/exp1/csv/clean/us-dem-p3.csv") #%>%
unique(us_dem$prolificID)
us_dem <- read_csv("data/exp1/csv/clean/us-dem-p3.csv") %>%
filter(progressBlock == 14, progressColor == 37)
us_dem <- read_csv("data/exp1/csv/clean/us-dem-p3.csv") %>%
filter(progressBlock == 14, progressColor == 37)
unique(us_dem$prolificID)
unique(us_dem$sessionID)
